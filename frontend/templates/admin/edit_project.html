{% extends "admin/base.html" %}

{% block title %}Edit Project - {{ project.title }}{% endblock %}

{% block page_title %}Edit Project{% endblock %}
{% block page_subtitle %}Update project details{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="glassmorphism rounded-2xl p-6 neon-hover">
        <!-- Back Button -->
        <div class="mb-6">
            <a href="{{ url_for('admin.manage_projects') }}" 
               class="inline-flex items-center text-cyan-400 hover:text-cyan-300 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Projects
            </a>
        </div>

        <!-- Edit Project Form -->
        <form method="POST" 
              action="{{ url_for('admin.edit_project', id=project.id) }}" 
              enctype="multipart/form-data"
              class="space-y-6">
            
            <!-- Project Title -->
            <div>
                <label class="block text-white font-semibold mb-2">
                    <i class="fas fa-heading text-blue-400 mr-2"></i>
                    Project Title *
                </label>
                <input type="text" 
                       name="title" 
                       value="{{ project.title }}" 
                       class="w-full form-input rounded-lg px-4 py-3 bg-white/5 border border-white/10 text-white focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400"
                       placeholder="Enter project title"
                       required>
            </div>

            <!-- Description -->
            <div>
                <label class="block text-white font-semibold mb-2">
                    <i class="fas fa-align-left text-green-400 mr-2"></i>
                    Description *
                </label>
                <textarea name="description" 
                          rows="5" 
                          class="w-full form-input rounded-lg px-4 py-3 bg-white/5 border border-white/10 text-white focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400"
                          placeholder="Describe your project in detail..."
                          required>{{ project.description }}</textarea>
            </div>

            <!-- Tech Stack -->
            <div>
                <label class="block text-white font-semibold mb-2">
                    <i class="fas fa-code text-purple-400 mr-2"></i>
                    Tech Stack
                </label>
                <input type="text" 
                       name="tech_stack" 
                       value="{{ project.tech_stack }}" 
                       class="w-full form-input rounded-lg px-4 py-3 bg-white/5 border border-white/10 text-white focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400"
                       placeholder="Python, Flask, PostgreSQL, JavaScript, etc.">
                <p class="text-white/60 text-sm mt-1">Separate technologies with commas</p>
            </div>

            <!-- Project Links -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-white font-semibold mb-2">
                        <i class="fas fa-external-link-alt text-yellow-400 mr-2"></i>
                        Live Project Link
                    </label>
                    <input type="url" 
                           name="project_link" 
                           value="{{ project.project_link }}" 
                           class="w-full form-input rounded-lg px-4 py-3 bg-white/5 border border-white/10 text-white focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400"
                           placeholder="https://your-project.com">
                </div>

                <div>
                    <label class="block text-white font-semibold mb-2">
                        <i class="fab fa-github text-white mr-2"></i>
                        GitHub Repository
                    </label>
                    <input type="url" 
                           name="github_link" 
                           value="{{ project.github_link }}" 
                           class="w-full form-input rounded-lg px-4 py-3 bg-white/5 border border-white/10 text-white focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400"
                           placeholder="https://github.com/username/repo">
                </div>
            </div>

            <!-- Project Image -->
            <div>
                <label class="block text-white font-semibold mb-2">
                    <i class="fas fa-image text-pink-400 mr-2"></i>
                    Project Image
                </label>
                
                <!-- Current Image Preview -->
                {% if project.image_url %}
                <div class="mb-4 p-4 bg-white/5 rounded-lg">
                    <p class="text-cyan-400 font-semibold mb-2">Current Image:</p>
                    <div class="flex items-center space-x-4">
                        <img src="{{ url_for('static', filename=project.image_url) }}" 
                             class="w-32 h-32 object-cover rounded-lg border-2 border-cyan-400/50"
                             alt="{{ project.title }}">
                        <div class="text-white/70">
                            <p class="text-sm">Path: {{ project.image_url }}</p>
                            <p class="text-xs mt-1">Upload a new image to replace this one</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- File Upload -->
                <input type="file" 
                       name="image" 
                       accept="image/*" 
                       class="w-full text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-400 file:text-cyan-900 hover:file:bg-cyan-300">
                <p class="text-white/60 text-sm mt-1">Allowed formats: PNG, JPG, JPEG, GIF, SVG (Max: 16MB)</p>
            </div>

            <!-- Featured Project -->
            <div class="flex items-center p-4 bg-white/5 rounded-lg">
                <input type="checkbox" 
                       name="featured" 
                       value="true" 
                       id="featured"
                       class="rounded text-cyan-400 focus:ring-cyan-400 focus:ring-2"
                       {{ 'checked' if project.featured }}>
                <label for="featured" class="text-white ml-3 font-semibold cursor-pointer">
                    <i class="fas fa-star text-yellow-400 mr-2"></i>
                    Mark as Featured Project
                </label>
            </div>

            <!-- Form Actions -->
            <div class="flex space-x-4 pt-6 border-t border-white/10">
                <button type="submit" 
                        class="flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-save mr-2"></i>
                    Update Project
                </button>
                
                <a href="{{ url_for('admin.manage_projects') }}" 
                   class="flex-1 bg-white/10 hover:bg-white/20 text-white font-semibold py-3 px-6 rounded-lg text-center transition-all duration-300">
                    <i class="fas fa-times mr-2"></i>
                    Cancel
                </a>
            </div>
        </form>

        <!-- Project Info -->
        <div class="mt-8 p-4 bg-white/5 rounded-lg">
            <h4 class="text-white font-semibold mb-2 flex items-center">
                <i class="fas fa-info-circle text-blue-400 mr-2"></i>
                Project Information
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-white/70 text-sm">
                <div>
                    <p><strong>Created:</strong> {{ project.created_at.strftime('%B %d, %Y at %H:%M') }}</p>
                    <p><strong>Last Updated:</strong> {{ project.updated_at.strftime('%B %d, %Y at %H:%M') }}</p>
                </div>
                <div>
                    <p><strong>Project ID:</strong> {{ project.id }}</p>
                    <p><strong>Status:</strong> 
                        <span class="{{ 'text-yellow-400' if project.featured else 'text-white/50' }}">
                            {{ 'Featured' if project.featured else 'Standard' }}
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
